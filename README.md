# SBoard - ASP.NET Core Web API

## 1. პროექტის მიმოხილვა

**პროექტის ტიპი:**

- ASP.NET Core Web API backend

**ტექნოლოგიები, ჩარჩოები და ენები:**

- **ენა:** C#
- **ჩარჩო:** .NET 8.0
- **ძირითადი ბიბლიოთეკები:**
    - AutoMapper (ობიექტების რუკირება)
    - BCrypt.Net (პაროლების ჰეშირება)
    - FluentValidation (შეყვანის ვალიდაცია)
    - Microsoft.AspNetCore.Authentication.JwtBearer (JWT ავთენტიკაცია)
    - Microsoft.EntityFrameworkCore (ORM მონაცემთა ბაზისთვის)
    - Swashbuckle.AspNetCore (Swagger/OpenAPI დოკუმენტაცია)
- **მონაცემთა ბაზა:** SQL Server

**ძირითადი დანიშნულება:**

- Backend API ავთენტიკაციისთვის, მომხმარებელთა მართვისა და ბიზნეს ლოგიკისთვის, რომელიც ემსახურება ფრონტენდს (მაგალითად,
  Angular მისამართზე http://localhost:4200).

**ძირითადი ფუნქციები:**

- მომხმარებლის ავთენტიკაცია (JWT, პაროლის ჰეშირება)
- როლებზე დაფუძნებული წვდომა
- Entity Framework Core მონაცემთა ბაზასთან მუშაობისთვის
- DTO-ები მოთხოვნის/პასუხის სტრუქტურირებისთვის
- მოდულური სტრუქტურა (მაგალითად, Auth მოდული)
- API დოკუმენტაცია Swagger-ის მეშვეობით

---

## 2. საქაღალდეების სტრუქტურის დოკუმენტაცია

### 📁 Common/

- **დანიშნულება:** საერთო DTO-ები, დამხმარე ფუნქციები და ვალიდატორები, რომლებიც გამოიყენება სხვადასხვა მოდულში.
- **შეიცავს:** DTO-ები (Requests/Responses), Helpers, Validators.
- **ძირითადი ფაილები:**
    - `DTOs/Requests/` და `DTOs/Responses/`: მონაცემთა კონტრაქტები API-სთვის.
    - `Helpers`: დამხმარე ფუნქციები.
    - `Validators`: შეყვანის ვალიდაციის ლოგიკა.
- **როგორ მუშაობს:** DTO-ები გამოიყენება მონაცემების გადაცემისთვის კლიენტსა და სერვერს შორის; ვალიდატორები უზრუნველყოფენ
  მონაცემების სისწორეს.
- **დამოკიდებულებები:** გამოიყენება Controllers და Services მოდულებში.
- **მაგალითი:**
  ```csharp
  public IActionResult Register(UserRegisterRequest request) { ... }
  ```

### 📁 Core/

- **დანიშნულება:** ძირითადი ლოგიკა, კონსტანტები, გაფართოებები და შუამავლები (middleware).
- **შეიცავს:** Constants, Extensions, Middlewares.
- **ძირითადი ფაილები:**
    - `Constants/Info.cs`: აპლიკაციის მასშტაბის კონსტანტები.
    - `Extensions/PipelineExtensions.cs`, `ServiceExtensions.cs`: გაფართოებები სერვისებისა და შუამავლების
      კონფიგურაციისთვის.
    - `Middlewares`: მომხმარებლის შუამავლები.
- **როგორ მუშაობს:** გაფართოებები იძახება `Program.cs`-ში სერვისებისა და request pipeline-ის დასაყენებლად.
- **დამოკიდებულებები:** გამოიყენება `Program.cs`-ში და მთელ აპლიკაციაში.
- **მაგალითი:**
  ```csharp
  builder.Services.AddApplicationServices(builder.Configuration);
  app.ConfigureRequestPipeline();
  ```

### 📁 Data/

- **დანიშნულება:** მონაცემთა ბაზასთან წვდომის ფენა.
- **შეიცავს:**
    - `DataContext.cs`: Entity Framework Core DbContext მონაცემთა ბაზასთან წვდომისთვის.
- **ძირითადი ფაილები:**
    - `DataContext.cs`: მონაცემთა ბაზის სეტებისა და კავშირის კონფიგურაცია.
- **როგორ მუშაობს:** გამოიყენება სერვისების მიერ მონაცემთა ბაზასთან სამუშაოდ.
- **დამოკიდებულებები:** გამოიყენება Services და Entities-ში.
- **მაგალითი:**
  ```csharp
  public class DataContext : DbContext { ... }
  ```

### 📁 Entities/

- **დანიშნულება:** მონაცემთა ბაზის სუბიექტების მოდელები.
- **შეიცავს:**
    - `BaseEntity.cs`: სავარაუდოდ, ყველა სუბიექტის საბაზისო კლასი.
- **ძირითადი ფაილები:**
    - `BaseEntity.cs`: საერთო ველები ყველა სუბიექტისთვის (მაგალითად, Id, timestamps).
- **როგორ მუშაობს:** მემკვიდრეობით გადაეცემა სხვა სუბიექტებს.
- **დამოკიდებულებები:** გამოიყენება DataContext და Services-ში.
- **მაგალითი:**
  ```csharp
  public class User : BaseEntity { ... }
  ```

### 📁 Enums/

- **დანიშნულება:** ენუმერაციები აპლიკაციის ლოგიკისთვის.
- **შეიცავს:**
    - `Auth/ACCOUNT_STATUS.cs`, `ROLES.cs`: სტატუსებისა და როლების ენუმერაციები.
- **ძირითადი ფაილები:**
    - `ROLES.cs`: მომხმარებლის როლების განსაზღვრა ავტორიზაციისთვის.
- **როგორ მუშაობს:** გამოიყენება ავთენტიკაციის/ავტორიზაციის ლოგიკაში.
- **დამოკიდებულებები:** გამოიყენება Services, Controllers და Models-ში.
- **მაგალითი:**
  ```csharp
  public enum ROLES { Admin, User, ... }
  ```

### 📁 Models/

- **დანიშნულება:** დომენური მოდელები, განსაკუთრებით ავთენტიკაციისთვის.
- **შეიცავს:**
    - `Auth/EmailVerification.cs`, `PasswordVerification.cs`, `User.cs`: მოდელები მომხმარებლისა და ვერიფიკაციისთვის.
- **ძირითადი ფაილები:**
    - `User.cs`: მომხმარებლის სუბიექტი/მოდელი.
- **როგორ მუშაობს:** გამოიყენება DataContext და Auth სერვისებში.
- **დამოკიდებულებები:** გამოიყენება Services და Controllers-ში.
- **მაგალითი:**
  ```csharp
  public class User { public string Email { get; set; } ... }
  ```

### 📁 Modules/

- **დანიშნულება:** მოდულური ბიზნეს ლოგიკა, განსაკუთრებით ავთენტიკაცია.
- **შეიცავს:**
    - `Auth/`: ავთენტიკაციის მოდული Controllers, DTOs, Helpers, Services, Validations-ით.
- **ძირითადი ფაილები:**
    - `AuthExtensions.cs`: Auth მოდულის გაფართოებები.
    - `Controllers/`: ავთენტიკაციის API endpoint-ები.
    - `Services/`: ავთენტიკაციის ბიზნეს ლოგიკა.
- **როგორ მუშაობს:** ახორციელებს ავთენტიკაციის endpoint-ებსა და ლოგიკას.
- **დამოკიდებულებები:** იყენებს Common, Core, Data, Models, Enums-ს.
- **მაგალითი:**
  ```csharp
  [ApiController]
  [Route("api/auth")]
  public class AuthController : ControllerBase { ... }
  ```

### 📁 bin/, obj/, Properties/

- **დანიშნულება:** ასაწყობი (build) და შუალედური ფაილები, ასევე პროექტის თვისებები.
- **შეიცავს:** კომპილირებული DLL-ები, build არტიფაქტები და გაშვების პარამეტრები.
- **ძირითადი ფაილები:**
    - `launchSettings.json`: გაშვების/დაბგის კონფიგურაცია.
- **როგორ მუშაობს:** გამოიყენება .NET-ის ასაწყობ და გაშვების პროცესებში.
- **დამოკიდებულებები:** არ აქვს (ინფრასტრუქტურულია).

---

## 3. როგორ მუშაობს პროექტი

- **საწყისი წერტილი:**
    - `Program.cs` არის საწყისი წერტილი. აგებს ვებ აპლიკაციას, ამატებს სერვისებს `AddApplicationServices`-ის მეშვეობით,
      აწყობს request pipeline-ს და უშვებს აპს.
- **მონაცემთა ნაკადის მოძრაობა:**
    - HTTP მოთხოვნა → Controller (მაგ. AuthController) → Service (ბიზნეს ლოგიკა) → DataContext (მონაცემთა ბაზა) →
      Response DTO → HTTP პასუხი.
- **არქიტექტურის ტიპი:**
    - ფენოვანი არქიტექტურა მოდულური გამიჯვნით (Controllers, Services, Data, DTOs, Entities).
- **მოთხოვნის/პასუხის ციკლი:**
    - მოთხოვნები გადამისამართდება controllers-ში, ვალიდირდება, მუშავდება სერვისებში და პასუხები ბრუნდება DTO-ების სახით.
- **კომპონენტების ურთიერთქმედება:**
    - Controllers იყენებს Services-ს, რომელიც იყენებს DataContext-სა და Entities-ს. DTO-ები გამოიყენება შეყვანისა და
      გამოტანისთვის. შუამავლები და გაფართოებები აწყობენ საერთო ლოგიკას.

---

## 4. დაყენება და ინსტალაცია

- **დამოკიდებულებები:**
    - ჩამოთვლილია `RBS.csproj`-ში (ზემოთ იხილეთ ძირითადი პაკეტები).
- **გარემოს ცვლადები:**
    - `appsettings.json` შეიცავს:
        - `ConnectionStrings:DefaultConnection` (SQL Server)
        - `JWT:Key`, `JWT:Issuer`, `JWT:Audience`, `JWT:DurationInMinutes`
- **მონაცემთა ბაზა:**
    - საჭიროა SQL Server, კავშირის სტრიქონი მითითებულია `appsettings.json`-ში.
- **კონფიგურაციის ფაილები:**
    - `appsettings.json`, `appsettings.Development.json`
- **დაყენების ნაბიჯები:**
    1. დააყენეთ .NET 8.0 SDK.
    2. აღადგინეთ დამოკიდებულებები: `dotnet restore`
    3. განაახლეთ `appsettings.json` თქვენი მონაცემთა ბაზისა და JWT პარამეტრებით.
    4. გაუშვით მონაცემთა ბაზის მიგრაციები (თუ საჭიროა): `dotnet ef database update`
    5. გაუშვით API: `dotnet run`

---

## 5. API/მარშრუტების დოკუმენტაცია

- **Endpoint-ები:**
    - განთავსებულია `Modules/Auth/Controllers/`-ში (მაგალითად, `/api/auth/register`, `/api/auth/login`)
- **HTTP მეთოდები:**
    - როგორც წესი, `POST` რეგისტრაციის/შესვლისთვის, `GET` სტატუსისთვის და ა.შ.
- **Request/Response:**
    - მოთხოვნის DTO-ები `Common/DTOs/Requests/`-ში, პასუხის DTO-ები `Common/DTOs/Responses/`-ში
- **ავთენტიკაცია:**
    - JWT Bearer ავთენტიკაცია (იხ. `Microsoft.AspNetCore.Authentication.JwtBearer`)

---

## 6. ძირითადი ფუნქციონალი

- **ძირითადი ფუნქციები:**
    - მომხმარებლის რეგისტრაცია, შესვლა, JWT ტოკენის გენერაცია, პაროლის ჰეშირება, როლების მართვა.
- **ბიზნეს ლოგიკა:**
    - განხორციელებულია სერვისებში (მაგალითად, AuthService).
- **მონაცემთა ბაზის მოდელები:**
    - User, EmailVerification, PasswordVerification (იხ. `Models/Auth/`)
- **სერვისები:**
    - მართავს ავთენტიკაციას, მომხმარებლებსა და ტოკენებს.

---

## 7. როგორ გამოვიყენოთ ეს პროექტი

- **აპის გაშვება:**
    - `dotnet run` (appsettings.json-ის კონფიგურაციის შემდეგ)
- **ახალი ფუნქციების დამატება:**
    - დაამატეთ ახალი მოდულები `Modules/`-ში, controllers, services, DTO-ებით.
- **ლოგიკის შეცვლა:**
    - განაახლეთ სერვისები ბიზნეს ლოგიკისთვის, controllers API endpoint-ებისთვის.
- **ტესტირება:**
    - ტესტური ფაილები არ აღმოჩნდა root სტრუქტურაში; დაამატეთ ტესტები `Tests/` საქაღალდეში ან მსგავსად.

---

## 8. ფაილების შაბლონები და სტილი

- **დასახელების კონვენციები:**
    - PascalCase კლასებისთვის, camelCase ცვლადებისთვის, საქაღალდეები ფუნქციის/ტიპის მიხედვით (მაგ. DTOs, Services).
- **კოდის სტილი:**
    - სტანდარტული C#/.NET კონვენციები, გაფართოებების გამოყენება კონფიგურაციისთვის.
- **საერთო იმპორტები:**
    - `using Microsoft.AspNetCore.*`, `using Microsoft.EntityFrameworkCore`, `using AutoMapper` და სხვ.
- **შაბლონები:**
    - ფენოვანი გამიჯვნა (Controllers, Services, Data, DTOs, Entities), გაფართოებების გამოყენება კონფიგურაციისთვის.

---

**შენიშვნა:**  
ეს დოკუმენტაცია ავტომატურად გენერებულია პროექტის რეალური კოდის და სტრუქტურის მიხედვით. დეტალებისთვის იხილეთ ზემოთ
აღწერილი თითოეული საქაღალდე და ფაილი.
